
<html>
    <head>
        <script src="blockly/blockly_compressed.js"></script>
        <script src="blockly/blocks_compressed.js"></script>
        <script src="blockly/javascript_compressed.js"></script>
        <script src="blockly/msg/js/en.js"></script>
        <script src="blockly/generators/javascript/tello.js"></script>
        
        <script src="blockly/blocks/takeoff.js"></script>
        <script src="blockly/blocks/land.js"></script>
        <script src="blockly/blocks/fly_to.js"></script>
    </head>
    <body>
        <div id="blocklyDiv" style="height: 480px; width: 600px;"></div>

        <xml id="toolbox" style="display: none">
            <block type="takeoff"></block>
            <block type="land"></block>
            <block type="fly_to">
                <value name="x">
                    <shadow type="math_number">
                      <field name="NUM">10</field>
                    </shadow>
                  </value>
                  <value name="y">
                    <shadow type="math_number">
                      <field name="NUM">10</field>
                    </shadow>
                  </value>
                  <value name="z">
                    <shadow type="math_number">
                      <field name="NUM">10</field>
                    </shadow>
                  </value>
            </block>
            <block type="controls_if"></block>
            <block type="controls_repeat_ext"></block>
            <block type="logic_compare"></block>
            <block type="math_number"></block>
            <block type="math_arithmetic"></block>
            <block type="text"></block>
            <block type="text_print"></block>
        </xml>

        <div>
            <button onclick="doSomething();">Launch</button>
        </div>

        <script>
            var workspace = Blockly.inject('blocklyDiv', {toolbox: document.getElementById('toolbox')})
        </script>

        <script>
            const { ipcRenderer } = require('electron')

            function doSomething() {

                var code = Blockly.JavaScript.workspaceToCode()
                ipcRenderer.send('launch', code)
                
            }
        </script>

    </body>
</html>